#! /bin/bash
# Common commands to be sourced by rc files like .bashrc and .zshrc

# Dircolors
eval `dircolors ~/.dir_colors`

# Check for keychain and initialize if it exists
if command -v keychain &> /dev/null; then
    eval $(keychain --eval --ignore-missing --agents ssh -Q --quiet id_rsa_bitbucket id_ecdsa_osgiliath id_ecdsa_khazaddum id_rsa_gandalf id_ecdsa_lothlorien id_rsa_github id_rsa_da-esgaroth id_ed25519_mithlond id_ed25519 id_rsa)
fi

# workaround for terms that don't read xresources right
if [[ $TERM == xterm-256color ]]; then
    ~/bin/base16-default.dark.sh  
fi

if [ -e ~/bin/fetch/neofetch ]; then 
    ~/bin/fetch/neofetch
fi

# Print last login info
last -a -9 | sed 's/system boot/system-boot/g' | head -n 2 | tail -n 1 | awk 'BEGIN {ORS=" "} {print "Last Login:", $3 ",", $4, $5, "at", $6, "by", $1, "from"} {if ($10) print $10; else print "system boot"} {ORS="\n"} {print ""}'
